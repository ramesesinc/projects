<workunit>
    <invokers>
        <invoker type="remittance:reports" caption="Remittance Summary of Collection (NGAS)" action="preview" target="self" index="10"/>
    </invokers>
    
    <code>
        <![CDATA[    
        import com.rameses.osiris2.common.*;
        import com.rameses.rcp.common.*;
        import com.rameses.rcp.annotations.*;
        import java.rmi.server.*;
        import com.rameses.osiris2.client.*;
        import com.rameses.util.*;
        import com.rameses.osiris2.reports.*;
        
        class RemittanceCollectionSummaryReportController extends com.rameses.etracs.shared.ReportController {
        
            @Service("NGASRemittanceReportService")
            def svc
            
            String title = "Remittance Summary of Collection (NGAS)"; 
            def reportpath = "com/rameses/gov/ngas/etracs/reports/"
            String reportName = reportpath + 'ngas_remittance_collection_summary.jasper' 
            def data;
            def fund;
            def fundlist;      
           
            void setFund( def fund ) {
                this.fund = fund;
                preview();
            }
            
            def getReportData() {
                data = svc.getSummaryReport( entity, fund ); 
                if( !fundlist )  {
                    fundlist = data.items*.fund.unique();
                }
                return data.items;
            }
            
            Map getParameters(){
                return data.header
            }
            
        }      
       ]]>
    </code>
    
   <pages>
       <page name="preview" template="com.rameses.enterprise.accounts.ReportByFund"/>
   </pages>
   
</workunit>