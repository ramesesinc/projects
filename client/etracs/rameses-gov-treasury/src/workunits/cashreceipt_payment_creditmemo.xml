<workunit>
    <invokers>
          <invoker type="cashreceipt:payment-creditmemo" caption="Credit Memo" target="popup" action="start"/>
    </invokers>
    <code class="com.rameses.enterprise.treasury.models.CashReceiptPaymentCreditMemoModel" />
    
     <pageflow>
        <start>
            <transition to="initial" />
        </start>
        <page name="initial" title="Enter Details">
            <transition to="end"  caption="Cancel" confirm="If cancelled you will need to redo payment. Proceed?" mnemonic="C"/> 
            <transition to="check-balance"  caption="Next" action="addEntry" mnemonic="N"/> 
        </page>
        <process name="check-balance">
            <transition to="initial"  caption="Cancel" cond="#{hasBalance}" action="clearEntry"/> 
            <transition to="view-summary"  caption="Cancel" cond="#{!hasBalance}"/> 
        </process>     
        <page name="view-summary" title="Credit Memo Payment Summary">
            <transition to="end"  caption="Cancel" confirm="If cancelled you will need to redo payment. Proceed?" mnemonic="C"/> 
            <transition to="end" caption="Save" action="savePayment" mnemonic="S"/> 
        </page>
        <end/>
    </pageflow> 
    
    <pages>
        <page name="initial" template="com.rameses.enterprise.treasury.views.CashReceiptCreditMemoPayment"/>
        <page name="view-summary" template="com.rameses.enterprise.treasury.views.CashReceiptNoncashPaymentSummaryPage" />
    </pages>
    
</workunit>