<workunit>
    
    <invokers>
        <invoker type="cashreceiptinfo:formActions" caption="Print Detail" action="print" target="process" 
                 role="COLLECTOR" visibleWhen="#{developerMode != true}" index="1"/> 
        <invoker type="cashreceiptinfo:formActions" caption="Preview Detail" action="preview"  
                 role="COLLECTOR" visibleWhen="#{developerMode == true}" index="1"/> 
        <invoker type="misc_cashreceipt:formActions" caption="Print Detail" action="print" target="process" 
                 index="1" visibleWhen="#{completed &amp;&amp; entity.formno == '51'}"/>
    </invokers>
   
    <code>
    <![CDATA[
import com.rameses.rcp.annotations.*
import com.rameses.rcp.common.*
import com.rameses.osiris2.client.*
import com.rameses.osiris2.common.*
import com.rameses.osiris2.reports.*;

 class CashReceiptForm51Detail  {

    def entity;
    
    @Service("ReportParameterService")
    def paramSvc
    
    boolean developerMode = ReportUtil.isDeveloperMode(); 

    void print() { 
        report.viewReport(); 
        ReportUtil.print( report.report, true) ; 
    } 

    void preview() { 
        report.viewReport(); 
    } 
    
    def reportPath = 'com/rameses/gov/treasury/cashreceipt/forms/'
    
    def report = [
        getReportName : { return reportPath + "af51detail.jasper" },
        getReportData : { return entity }, 
        getParameters : { return paramSvc.getStandardParameter() },
        getSubReports : {
            return [
                new SubReport("ITEM", reportPath + "af51detailitem.jasper")
            ] as SubReport[];  
        }
    ] as ReportModel
}
    ]]>
    </code>

    <pages> 
        <page template="com.rameses.osiris2.common.ui.ReportPreviewPage"/> 
    </pages> 
</workunit> 
