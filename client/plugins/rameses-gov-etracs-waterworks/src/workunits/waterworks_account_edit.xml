<workunit extends="com/rameses/seti2/templates/DataEditor.xml" schemaName="waterworks_account" 
    reftype="waterworks_account" >
    <invokers>
        <invoker type="waterworks_account:form:edit" caption="Change Address" 
                 target="popup" action="init" index="10" tag="address" />
        
        <invoker type="waterworks_account:form:edit" caption="Change Owner" action="init"  
                 target="popup" index="11" tag="owner"/>            
        
        <invoker type="waterworks_account:form:edit" caption="Change No. of Units" action="init"  
                 target="popup" index="13" tag="units"  />
        
        <invoker type="waterworks_account:form:edit" caption="Change Stubout Node" action="init"  
                 target="popup" index="14" tag="stuboutnode"/>
        
        <!-- Meter actions -->
        <invoker type="waterworks_account:form:edit" caption="Change Meter" action="init" 
                 visibleWhen="#{entity.meter?.objid!=null}"
                 target="popup" index="12" tag="change_meter" />
        
        <invoker type="waterworks_account:form:edit" caption="Attach Meter" 
                visibleWhen="#{entity.meter?.objid==null}" action="init" 
                target="popup" index="16" tag="attach_meter"/>
        
        <invoker type="waterworks_account:form:edit" caption="Detach Meter" 
                visibleWhen="#{entity.meter?.objid!=null}" action="init" 
                target="popup" index="15" tag="detach"/>
        
        <invoker type="waterworks_account:form:edit" caption="Change status to Defective" 
                visibleWhen="#{entity.meter?.state=='ACTIVE'}" action="init" 
                target="popup" index="16" tag="set_as_defective" />
                
        <invoker type="waterworks_account:form:edit" caption="Disconnect" 
                visibleWhen="#{entity.meter?.state=='ACTIVE'}" action="init" 
                 target="popup" index="16" tag="disconnect" />
        
        <invoker type="waterworks_account:form:edit" caption="Reconnect" 
                visibleWhen="#{entity.meter?.state?.matches('DISCONNECTED|DEFECTIVE')}"
                action="init" 
                target="popup" index="17" tag="reconnect"  />
        
        <invoker type="waterworks_account:form:edit" caption="Edit Meter Reading" 
                visibleWhen="#{entity.meter?.objid!=null}" action="init" 
                 target="popup" index="16" tag="reading" />
    </invokers>
    
    <code class="com.rameses.gov.etracs.waterworks.models.AccountEditModel" />
        
</workunit>
