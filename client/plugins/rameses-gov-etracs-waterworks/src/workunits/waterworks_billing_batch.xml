<workunit schemaName="waterworks_billing_batch">
    <invokers>
        <invoker folderid="/menucategory/waterworks/billing" caption="New Batch Billing" action="create" index="0"/>
        
        <invoker type="waterworks_billing_batch:create" caption="New Billing" action="create" />
        <invoker type="waterworks_billing_batch:open" caption="Batch Billing" action="open" />
        
        <!-- Batch Actions -->
        <invoker type="formActions" caption="Close" action="_close" visibleWhen="#{mode != 'create' }"/>
        <invoker type="formActions" caption="Submit for Process" action="submitForProcessing" visibleWhen="#{entity.state == 'DRAFT'}"/>
        <invoker type="formActions" caption="Submit for Review" action="submitForReview" visibleWhen="#{ entity.state == 'PROCESSING' }"/>
        <invoker type="formActions" caption="Revert" action="revertForProcessing" visibleWhen="#{ entity.state == 'FOR_REVIEW' }"/>
        <invoker type="formActions" caption="Submit for Reading" action="submitForReading" visibleWhen="#{ entity.state == 'FOR_REVIEW' }"/>
        
        <invoker type="formActions" caption="Submit for Approval" action="submitForApproval" visibleWhen="#{ entity.state == 'FOR_READING' }"/>
        <invoker type="formActions" caption="Approve" action="approve" visibleWhen="#{ entity.state == 'FOR_APPROVAL' }"/>
        <invoker type="formActions" caption="Print Batch" action="printBill" visibleWhen="#{ entity.state == 'APPROVED' }"/>
        <invoker type="formActions" caption="Post" action="post" visibleWhen="#{ entity.state == 'APPROVED' }"/>
        
    </invokers>
    
    <code class="com.rameses.gov.etracs.waterworks.models.BatchBillingModel" />

    <pages>
        <page name="create" template="com.rameses.gov.etracs.waterworks.views.BatchBillingInitialPage" />
        <page name="default" template="com.rameses.gov.etracs.waterworks.views.BatchBillingPage" />
        <page name="processing" template="com.rameses.gov.etracs.waterworks.views.ProgressPage" />
    </pages>    
</workunit>
