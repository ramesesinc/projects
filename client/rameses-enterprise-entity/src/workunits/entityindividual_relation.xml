<workunit>
    <invokers>
        <invoker type="entity:specify-relation" caption="Specify Relationship" target="popup"/> 
    </invokers>
    <code>
    <![CDATA[ 
import com.rameses.rcp.annotations.*;
import com.rameses.rcp.common.*;

class SpecifyRelationController {
    
    @Service('EntityRelationService') 
    def svc; 
    
    def entity = [:]; 
    def handler;
    
    def doOk() { 
        svc.update([ objid: entity.objid, relation: entity.relation ]); 

        if ( handler ) handler( entity ); 
        
        return '_close'; 
    } 
    
    def doCancel() {
        return '_close';
    }     
} 
    ]]> 
    </code>
    <pages>
        <page template="com.rameses.entity.views.SpecifyEntityRelationPage"/>        
    </pages>    
</workunit>