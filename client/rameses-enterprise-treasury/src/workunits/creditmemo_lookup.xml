<workunit extends="com/rameses/seti2/templates/CrudLookup.xml" schemaName="creditmemo">
    
   <invokers>
         <invoker type="creditmemo:forreceipt:lookup" caption="Credit Memo Lookup" action="init" tag="forreceipt"
            cols="refno,refdate,payer.name,bankaccount.code,bankaccount.name,bankaccount.bank.name,amount,issuedby.name" target="popup"/>
   </invokers>
   
   <code>
       <![CDATA[
        import com.rameses.osiris2.common.*;
        import com.rameses.rcp.common.*;
        import com.rameses.rcp.annotations.*;
        import com.rameses.osiris2.client.*;
        import com.rameses.seti2.models.*;
        
        class CreditMemoLookup extends CrudLookupModel  {
            
            def getCustomFilter() {
                if( tag == "forreceipt" ) {
                    return [ "issuereceipt = 1 AND receiptid IS NULL " ];
                }
                return null;
            }
            
        }      
       ]]>
   </code>
      
</workunit>