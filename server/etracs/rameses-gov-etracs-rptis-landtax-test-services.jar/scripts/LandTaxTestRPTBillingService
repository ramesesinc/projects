import com.rameses.annotations.*;
import java.rmi.server.*;
import com.rameses.rules.common.*;
import com.rameses.util.*;
import com.rameses.services.extended.*;
import rptis.landtax.facts.*;
import rptis.landtax.actions.*;


public class LandTaxTestRPTBillingService
{

	@Service('RPTLedgerService')
	def ledgerSvc

	@Service('RPTBillingService')
	def billingSvc 

	@Service('RPTUtil')
	def util

	@Service("LOVService")
    def LOV


    @ProxyMethod 
    public def testLov(){
    	return LOV.RPT_BILLING_REVENUE_TYPES*.key
    }


	@ProxyMethod
	public def testGenerateBill(params){
		util.required('ledgerid', params.ledgerid)
		
		def bill = billingSvc.initBill()
		bill.ledgers << [objid: params.ledgerid]

		if (params.billtoyear) bill.billtoyear = Integer.parseInt(params.billtoyear)
		if (params.billtoqtr) bill.billtoqtr = Integer.parseInt(params.billtoqtr)
		bill.billto = [objid:'IND-10392c89:156689ec4f6:-467b', name:'JUAN', address:'cebu']
		bill.taxpayer = bill.billto
		bill.postedby = 'system'
		bill.postedbytitle = 'system'
		bill._forpayment = true
		bill = billingSvc.generateBill(bill)
		println 'BILL => ' + bill 
		return bill 
	}
}
