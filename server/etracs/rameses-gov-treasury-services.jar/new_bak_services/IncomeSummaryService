import com.rameses.annotations.*;

class IncomeSummaryService {
	
	@ActiveDB("income_summary")
	def em;

	@DataContext("liquidation")
	def liqEm;

	@ProxyMethod
	public void post( o ) { 
		def m = liqEm.find([ objid: o.objid ]).first(); 
		if ( !m ) return;

		println 'post to income..' + m.objid;
		em.postIncomeSummary([ liquidationid: m.objid ]);	
		liqEm.find([ objid: m.objid ]).update([ posted: 1 ]); 
	} 
}