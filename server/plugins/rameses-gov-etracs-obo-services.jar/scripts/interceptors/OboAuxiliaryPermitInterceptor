import com.rameses.annotations.*; 

class OboAuxiliaryPermitInterceptor { 


	@DataContext("obo_auxiliary_permit")
	def auxPermit;


	@Before(pattern="PersistenceService.removeEntity", eval="#{args[0]._schemaname == 'obo_auxiliary_permit' }") 
	public void beforeRemovePermit( def evt ) {
		def o = evt.args[0];	
		def z = auxPermit.find( [objid: o.objid ]).first();	
		if(z.state =='PENDING') 
			throw new Exception("Cannot delete permit entry. State is not PENDING");
	} 



} 