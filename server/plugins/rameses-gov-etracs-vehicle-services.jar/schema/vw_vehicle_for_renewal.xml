<!--
drop view if exists vw_vehicle_for_renewal
;
create view vw_vehicle_for_renewal as 
SELECT 
	a.*, 
	vf.controlno,
	t.state AS taskstate
FROM vehicle_franchise vf 
INNER JOIN vehicle_application a ON a.objid = vf.appid 
INNER JOIN vehicle_application_task t on t.taskid = a.taskid 
WHERE a.expirydate <= NOW()
	
-->
<schema adapter="vehicledb">
	<element tablename="vw_vehicle_for_renewal">
		<field name="objid" /> 
		<field name="vehicletypeid" /> 
		<field name="controlno" /> 
		<field name="appno" /> 
		<field name="appdate" /> 
		<field name="apptype" /> 
		<field name="expirydate" /> 
		<field name="appyear" /> 
		<field name="owner_objid" /> 
		<field name="owner_name" /> 
		<field name="owner_address_objid" /> 
		<field name="owner_address_text" /> 
		<field name="taskid" />
		 <field name="taskstate" />
		<field name="particulars" /> 
		<field name="controlno" /> 
	</element>
</schema>

