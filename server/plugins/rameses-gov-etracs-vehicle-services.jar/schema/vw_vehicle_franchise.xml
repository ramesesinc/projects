<!--
drop view if exists vw_vehicle_franchise
;
create view vw_vehicle_franchise as 
SELECT 
	a.objid, 
	vf.vehicletypeid, 
	vf.controlno,
	a.appno,
	a.appdate,
	a.apptype,
	a.expirydate,
	a.appyear,
	a.owner_objid,
	a.owner_name,
	a.owner_address_objid,
	a.owner_address_text, 
	t.taskid, 
	t.state as taskstate, 
	a.primaryappid, 
	a.rootappid 
FROM vehicle_franchise vf 
	INNER JOIN vehicle_application_unit vu on vu.objid = vf.vehicleunitid 
	INNER JOIN vehicle_application a ON a.objid = vu.appid 
	INNER JOIN vehicle_application_task t on t.taskid = a.taskid 
	
-->
<schema adapter="vehicledb">
	<element tablename="vw_vehicle_franchise">
		<field name="objid" /> 
		<field name="vehicletypeid" /> 
		<field name="controlno" /> 
		<field name="appno" /> 
		<field name="appdate" /> 
		<field name="apptype" /> 
		<field name="expirydate" /> 
		<field name="appyear" /> 
		<field name="owner_objid" /> 
		<field name="owner_name" /> 
		<field name="owner_address_objid" /> 
		<field name="owner_address_text" /> 
		<field name="taskid" /> 
		<field name="taskstate" /> 
		<field name="primaryappid" /> 
		<field name="rootappid" /> 
	</element>
</schema>

