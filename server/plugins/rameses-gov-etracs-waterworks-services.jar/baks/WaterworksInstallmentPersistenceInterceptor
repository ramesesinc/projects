import com.rameses.annotations.*;

class WaterworksInstallmentPersistenceInterceptor {
	
	@DataContext('waterworks_account_ledger') 
	def acctledger; 

	@After(pattern="PersistenceService.create", eval="#{args[0]._schemaname == 'waterworks_installment'}")
	public void afterCreate( evt ) { 
		def result = evt.result; 
		if ( result.acctid ) {
			acctledger.find([ objid: result.ledgerid ]).update([ installmentid: result.objid ]);  
		} 
	} 
	
}