<schema adapter="waterworks">

	<element tablename="waterworks_account_ledger">
		<field name="objid" primary="true"  prefix="WAL"/>
		<field name="parentid" required="true"/> 

		<field name="year" required="true"/> 
		<field name="month" required="true"/> 

		<field name="duedate" required="true" caption="Due Date"/> 
		<field name="txntype" required="true" caption="TxnType"/> 
		<field name="item_objid" required="true"/>
		<field name="item_code" required="true" caption="Item Code"/>
		<field name="item_title" required="true" caption="Item Title"/>
		<field name="remarks" caption="Remarks"/>
		<field name="amount" required="true" caption="Amount" datatype="decimal"/>
		<field name="amtpaid" required="true" caption="AmtPaid" datatype="decimal"/>
		<field name="balance" expr="amount-amtpaid" caption="Balance" datatype="decimal"/>
		<field name="installmentid" />

		<field name="surcharge" required="true" caption="Surcharge" datatype="decimal"/>
		<field name="interest" required="true" caption="Interest" datatype="decimal"/>

		<field name="total" expr="(amount-amtpaid)+surcharge+interest"/>

		<complex name="consumption" ref="waterworks_account_consumption" jointype="many-to-one" required="false"
			includefields="volume,rate,reading,prevreading">
			<key field="objid" target="ledgerid" />
		</complex>	
	</element>

</schema>