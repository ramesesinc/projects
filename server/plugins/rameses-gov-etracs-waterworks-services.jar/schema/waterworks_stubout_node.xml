
<schema adapter="waterworks">
	<element tablename="waterworks_stubout_node">
		<field name="objid" primary="true" prefix="WNODE"/>
		<field name="indexno" required="true" searchable="true" indexed="true"/>
		<field name="acctid" visible="false"/> 
		<field name="applicationid" visible="false"/>		

		<!-- this is for fetching -->
		<complex name="account" ref="waterworks_account" required="false" jointype="many-to-one" 
			includefields="objid,acctno,acctname,address.text,meter.serialno,currentreading">
			<key field="acctid" target="objid"/>
		</complex>
		<complex name="stubout" ref="waterworks_stubout" jointype="many-to-one" 
			includefields="objid,code,zone.objid,zone.code,zone.sector.objid,zone.sector.code">
			<key field="stuboutid" target="objid"/>
		</complex>

		<complex name="application" ref="waterworks_application" required="false" jointype="many-to-one" 
			includefields="objid,appno,acctname,address.text">
			<key field="applicationid" target="objid"/>
		</complex>

	</element>
</schema>