import com.rameses.annotations.*;
import com.rameses.util.*;
import java.rmi.server.*;
import com.rameses.common.*;
import com.rameses.services.extended.*;

class VehicleService {

	@DataContext("ovr_vehicle")
	def ov;

	def getColumns(params){
		return [
			[name:'name', caption:'Name'],
			[name:'plateno', caption:'Plate No.'],
			[name: 'orcr', caption: 'ORCR'],
			[name: 'owner.name', caption: 'Owner'],
		];
	}

	@ProxyMethod
	public def getList(def o){
		o.searchtext = o.searchtext ? o.searchtext : '%';
		return ov.where("plateno LIKE :searchtext OR owner_name LIKE :searchtext",[searchtext:o.searchtext]).list();
	}

	@ProxyMethod
	public def open(def o){
		return ov.find([objid:o.objid]).first();
	}

	@ProxyMethod
	public def create(def o){
		return ov.create(o);
	}

	@ProxyMethod
	public def update(def o){
		return ov.find([objid:o.objid]).update(o);
	}

	@ProxyMethod
	public void removeEntity(def o){
		 ov.find([objid:o.objid]).delete();
	}

}