import com.rameses.annotations.*;
import com.rameses.util.*;

class SendoutService {

	@Service('FormControlService') 
	def controlSvc; 

	@Env 
	def env; 

	@ProxyMethod 
	def init() {
		def map = [
			branch     : [ objid: env.ORGID, name: env.ORGCODE+' '+ env.ORGNAME ], 
			user       : [ objid: env.USERID, name: env.USER ], 
			terminalid : env.TERMINALID 
		]; 
		def ctrl = controlSvc.getAvailable([ 
			branchid   : map.branch.objid, 
			terminalid : map.terminalid, 
			formtype   : 'SENDOUT', 
			formcode   : 'S' 
		]); 
		map.controlid = ctrl.objid;
		map.controlno = ctrl.seriesno; 
		return map;
	}

} 
