import com.rameses.annotations.*;

class WaterworksAccountService {
	
	@DataContext('waterworks_account_ledger')
	def ledger; 

	@DataContext('waterworks_account_consumption')
	def consumption; 

	@ProxyMethod
	public def postConsumption( def o ) {
		if(!o.duedate) throw new Exception("Duedate is required");
		o.readingmethod = 'CAPTURE';
		consumption.create( o );
		o.txntype = 'WFEE';
		if(o.postledger == true ) {
			o.parentid = o.account.objid;
			ledger.create(o);
		}
	}

	@ProxyMethod
	public def postLedger( def o ) {
		o.txntype = 'WFEE';
		if(o.postledger == true ) {
			o.parentid = o.account.objid;
			ledger.create(o);
		}
	}


}