import com.rameses.annotations.*;

class WaterworksAccountService {
	
	@DataContext("waterworks_account")
	def acct;

	@DataContext("waterworks_account_consumption")
	def wac;

	@Service("WaterworksBillingService")
	def billSvc;

	@DataContext("waterworks_meter")
	def wm;

	@ProxyMethod
	public def getConsumption(def o) {
		def feeList = wac.find([acctid: o.objid]).list();
		return billSvc.processBilling(feeList);
	}

	@ProxyMethod
	public def getTxnHistory(def o){
		return wac.find([acctid: o.objid]).list();
	}

}