import com.rameses.annotations.*;

class WaterworksLedgerService {

	@DataContext("waterworks_account_ledger")
	def ledger;	

	@ProxyMethod
	public def post( def o ) {
		ledger.create(o);
		/*
		def payOption = o.payOption;
		//this will search update all items inside app. see materials relationship

		//update the app fee. add txntype BOM bill of materials summary.
		def billItem = new BillItem(txntype:txntype, amount:payOption.amount);
		ruleService.execute("waterworksapplication", [billItem], null, null);

		def d = billItem.toItem();
		d.parentid = o.objid;
		d.txntype = txntype;
		d.amtpaid = 0;

		
		def m = [:];
		if( payOption.type == 'installment' ) {
			m.dtfiled = dateSvc.getServerDate();
			m.startdate = m.dtfiled;
			m.controlno = "BMI-"+new UID();
			m.state = 'OPEN';
			m.doctype = txntype;
			m.particulars = payOption.particulars;
			m.amount = payOption.amount;
			m.amtpaid = 0;
			m.amortization = payOption.amortization;
			m.term = payOption.term;
			m.downpayment = payOption.downpayment;
			m = appinst.create( m );
		}

		d.installmentid = m.objid;
		appfee.create( d );
		*/
	}



}