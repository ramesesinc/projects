<schema>
	<element tablename="cashreceipt" >
		<field name="objid" primary="true" prefix="RCT"/>
		<field name="state" required="true" />
		<field name="txndate" required="true" />
		<field name="receiptno" required="true" searchable="true" indexed="true" caption="Receipt No"/>
		<field name="receiptdate" required="true" caption="Receipt Date"/>
		<field name="txnmode" required="true" indexed="true" caption="Txn Mode"/>
		<field name="payer_objid"  />
		<field name="payer_name"  caption="Payer" searchable="true"  indexed="true"/>
		<field name="paidby" required="true" caption="Paid By"/>
		<field name="paidbyaddress" required="true" />
		<field name="series" required="true" />\
		<field name="collector_objid" required="true" />
		<field name="collector_name" required="true" searchable="true" indexed="true"/>
		<field name="collector_title" required="true" />
		<field name="amount" required="true" type="decimal" caption="Amount"/>
		<field name="totalcash" required="true" type="decimal" caption="Total Cash"/>
		<field name="totalnoncash" required="true" type="decimal" caption="Total Noncash"/>
		<field name="totalcredit" required="true" type="decimal" caption="Total Credit"/>
		
		<field name="cashchange" required="true" />
		<field name="totalcredit" required="true" />
		<field name="org_objid" required="true" />
		<field name="org_name" required="true" />
		<field name="formno" required="true" />
		<field name="formtype" required="true" />
		<field name="stub" required="true" />

		<field name="controlid" required="true" />
		<field name="collectiontype_objid" required="true" />
		<field name="collectiontype_name" required="true" />
		<field name="user_objid" required="true" />
		<field name="user_name" required="true" />
		<field name="remarks" />

		<field name="subcollector_objid" />
		<field name="subcollector_name" />
		<field name="subcollector_title" />

		<complex name="void" ref="cashreceipt_void" jointype="many-to-one" required="false" includefields="objid">
			<key field="objid" target="receiptid" />
		</complex> 

		<field name="remittanceid" />
		<complex name="remittance" ref="remittance" jointype="many-to-one" required="false">
			<key field="remittanceid" target="objid"/> 
		</complex> 

		<complex name="items" ref="cashreceiptitem" jointype="one-to-many">
			<key field="objid" target="receiptid" />
		</complex>	

		<complex name="paymentitems" ref="cashreceiptpayment_noncash" jointype="one-to-many">
			<key field="objid" target="receiptid" />
		</complex>	

		<complex name="sharing" ref="cashreceipt_share" jointype="one-to-many" required="false">
			<key field="objid" target="receiptid" />
		</complex>	

		<field name="voided" expr="CASE WHEN void.objid IS NULL THEN 0 ELSE 1 END" type="checkbox" checkedValue="1" uncheckedValue="0" caption="Void" />

	</element>
	
	<!--
	<element name="item" tablename="cashreceiptitem">
		<field name="objid" primary="true"/>
		<field name="receiptid" required="true" />
		<field name="item_objid" required="true" />
		<field name="item_code" required="true" />
		<field name="item_title" required="true" />
		<field name="amount" required="true" />
		<field name="remarks"  />
	</element>
	

	<element name="paymentitem-noncash" tablename="cashreceiptpayment_noncash">
		<field name="objid" primary="true"/>
		<field name="receiptid" required="true" />
		<field name="bankid" />
		<field name="deposittype" />
		<field name="bank" required="true"/>
		<field name="refno" required="true"/>
		<field name="refdate" required="true"/>
		<field name="reftype" />
		<field name="amount" />
		<field name="particulars" />
		<field name="account_objid" />
		<field name="account_fund_name"/>
		<field name="account_fund_objid" />
		<field name="account_code" />
		<field name="account_bank"/>
	</element>
	-->

	
	<element name="void" tablename="cashreceipt_void">
		<field name="objid" primary="true"/>
		<field name="receiptid" required="true" />
		<field name="txndate" required="true" />
		<field name="postedby_objid" required="true" />
		<field name="postedby_name" required="true" />
		<field name="reason"  />
	</element>

	<element name="cancelseries" tablename="cashreceipt_cancelseries">
		<field name="objid" primary="true"/>
		<field name="receiptid" required="true" />
		<field name="controlid" required="true" />
		<field name="txndate" required="true" />
		<field name="postedby_objid" required="true" />
		<field name="postedby_name" required="true" />
		<field name="reason"  />
	</element>
	
</schema>

