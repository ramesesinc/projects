<schema>

	<element  tablename="collectiondeposit_bank">
		<field name="objid" primary="true" prefix="CSHDEP"/>

		<complex name="deposit" ref="collectiondeposit" jointype="many-to-one" includefields="controlno,dtfiled">
			<key field="depositid" target="objid" />
		</complex>	
		
		<field name="state" required="true" />
		<field name="fund_objid" required="true" />
		<field name="amount" required="true" type="decimal" caption="Amount"/>
		<field name="totalcash" required="true" type="decimal" caption="Total Cash"/>
		<field name="totalnoncash" required="true" type="decimal" caption="Total Noncash"/>
		<field name="totalcashdeposited" required="true" type="decimal" caption="Total Cash Deposited"/>
		<field name="totalnoncashdeposited" required="true" type="decimal" caption="Total NonCash Deposited"/>

		<field name="balance" expr="totalcash+totalnoncash-totalcashdeposited-totalnoncashdeposited" caption="Undeposited"/> 

		<complex name="fund" ref="fund" jointype="many-to-one" required="false" includefields="objid,code,title">
			<key field="fund_objid" target="objid" />
		</complex>  
	</element>

</schema>