import com.rameses.annotations.*;
import com.rameses.util.*;
import java.rmi.server.*;


class PaymentOrderPersistenceInterceptor {

	@Env
	def env;

	@Service("DateService")
	def dateSvc;

	@Before(pattern="PersistenceService.create", eval="#{args[0]._schemaname == 'paymentorder' }", index=1000)
	public def beforeCreate(def evt) { 
		def entity = evt.args[0];
		entity.createdby = [objid:env.USERID, name:env.USERNAME];
		entity.controlno = KeyGen.generateAlphanumKey( null, 6 );
		entity.dtfiled = dateSvc.getServerDate();
	} 


}