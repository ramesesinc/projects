import com.rameses.annotations.*;

class RemittanceDefaultInterceptor {

	@DataContext("remittance_fund")
	def remf_db;

	@DataContext("remittance_af")
	def remaf_db;

	@DataContext("remittance_noncashpayment")
	def remnc_db;

	@DataContext("cashreceipt")
	def cashreceipt_db;

	@Before( pattern="PersistenceService.removeEntity" )
	public void beforeDelete( evt ) {
		def params = evt.args[0]; 
		def m = [ remittanceid: params.objid ];
		remf_db.find( m ).delete(); 
		remaf_db.find( m ).delete(); 
		remnc_db.find( m ).delete(); 

		cashreceipt_db.find( m ).update([ remittanceid: '{NULL}' ]);
	} 
}